# GGB 平衡隐私配置模板
# 此配置在隐私保护和性能之间取得平衡

[security]
# 是否隐藏IP地址
hide_ip = true

# 是否使用中继网络
use_relay = true

# 中继节点列表（至少需要一个可用的中继节点）
# 格式：/ip4/地址/tcp/端口/p2p/PeerId
relay_nodes = [
    # 示例中继节点（需要替换为实际可用的中继节点）
    # "/ip4/203.0.113.50/tcp/9001/p2p/12D3KooWExampleRelay1",
    # "/ip4/198.51.100.25/tcp/9002/p2p/12D3KooWExampleRelay2",
]

# 最大中继跳数（1-5，值越大隐私性越好但延迟越高）
max_hops = 3

# 是否启用自动NAT穿透
enable_autonat = true

# 是否启用直接连接升级（DCUtR）
# 启用后可能尝试建立直接连接，可能暴露IP
enable_dcutr = false

# 隐私-性能平衡配置
[security.privacy_performance]
# 平衡模式：performance（性能优先）、balanced（平衡）、privacy（隐私优先）、adaptive（自适应）
mode = "balanced"

# 性能权重（0.0-1.0），隐私权重 = 1.0 - performance_weight
performance_weight = 0.6

# 是否启用硬件加速加密
enable_hardware_acceleration = true

# 连接池大小
connection_pool_size = 10

# 是否启用0-RTT连接
enable_0rtt = true

# 拥塞控制算法：bbr、cubic、reno
congestion_control = "bbr"

# 路由选择策略：smart_balance、privacy_first、performance_first、latency_based、bandwidth_based
routing_strategy = "smart_balance"

# 最小隐私评分要求（0.0-1.0）
min_privacy_score = 0.7

# 最小性能评分要求（0.0-1.0）
min_performance_score = 0.8

# 是否允许回退到直接连接
fallback_to_direct = true

# 性能监控间隔（秒）
monitoring_interval_secs = 30

[comms]
# 通信主题
topic = "ggb-training-balanced"

# 是否启用公共DHT（隐藏IP时应禁用）
enable_dht = false

# 监听地址（使用中继时可以是本地地址）
listen_addr = "/ip4/127.0.0.1/tcp/0"

# QUIC绑定地址
quic_bind = "127.0.0.1:9234"

# 引导节点文件（私有网络使用）
bootstrap_peers_file = "balanced_bootstrap_peers.txt"

# 带宽预算配置
[comms.bandwidth]
# 稀疏更新每窗口数量
sparse_per_window = 12
# 密集快照每窗口字节数
dense_bytes_per_window = 262144  # 256KB
# 窗口秒数
window_secs = 60

[topology]
# 最大邻居数量
max_neighbors = 8
# 故障转移池大小
failover_pool = 4
# 地理范围（公里）
geo_scale_km = 300.0
# 节点过期时间（秒）
peer_stale_secs = 150

[inference]
# 模型维度
model_dim = 256
# 是否使用训练模式
use_training = true
# 学习率
learning_rate = 0.001
# 损失函数类型：MSE、MAE、CrossEntropy
loss_type = "MSE"
# 检查点目录
checkpoint_dir = "./checkpoints/balanced"

[crypto]
# 高性能加密配置
[crypto.high_performance]
# 默认加密算法：chacha20poly1305、aes256cbc、blake3
default_algorithm = "chacha20poly1305"
# 是否启用硬件加速
enable_hardware_acceleration = true
# 是否启用零拷贝加密
enable_zero_copy = true
# 是否启用并行处理
enable_parallel_processing = true
# 批量处理大小（字节）
batch_size_bytes = 1048576  # 1MB
# 缓存大小（条目）
cache_size = 1000

# 选择性加密配置
[crypto.selective]
# 敏感数据模式列表
sensitive_patterns = [
    "password=",
    "token=",
    "secret=",
    "key=",
    "auth=",
]

# 性能监控配置
[monitoring]
# 是否启用实时监控
enable_real_time_monitoring = true
# 调整间隔（秒）
adjustment_interval_secs = 30
# 性能阈值（毫秒）
performance_threshold_ms = 5
# 隐私阈值（评分）
privacy_threshold = 0.7
# 历史数据窗口大小
history_window_size = 100

# 自适应调整配置
[adaptive]
# 是否启用学习功能
learning_enabled = true
# 调整灵敏度（0.0-1.0）
adjustment_sensitivity = 0.3
# 历史窗口秒数
history_window_secs = 300
# 最小样本数量
min_samples = 10

# 配置说明：
# 1. 此配置在隐私和性能之间取得平衡
# 2. 启用IP隐藏和中继保护隐私
# 3. 使用智能路由选择最佳路径
# 4. 支持自适应调整基于网络条件
# 5. 提供全面的性能监控
# 
# 使用建议：
# 1. 替换relay_nodes为实际可用的中继节点
# 2. 根据网络条件调整performance_weight
# 3. 监控performance_threshold_ms确保性能目标
# 4. 定期检查隐私评分确保隐私保护效果
