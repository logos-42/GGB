# 桌面端与边缘服务器集成完成

## 快速开始

### 一键启动

双击运行：`启动集成系统.bat`

脚本将自动完成：
1. ✓ 检查Python和Node.js环境
2. ✓ 安装依赖（如需要）
3. ✓ 启动Python边缘服务器（端口8080）
4. ✓ 启动桌面应用

### 手动启动

**1. 启动Python服务：**
```bash
cd williw-use-master
python -m edge_server.api_server --port 8080
```

**2. 启动桌面应用（新终端）：**
```bash
npm run tauri dev
```

## 核心实现

### 1. HTTP客户端 (`src/utils/pythonClient.ts`)
- `healthCheck()` - 检查Python服务
- `listModels()` - 获取模型列表
- `sendInferenceRequest()` - 发送推理请求
- `startTraining()` / `stopTraining()` - 训练控制

### 2. TrainingSwitch组件
- 自动检查服务连接状态
- 验证模型选择
- 集成Python API调用
- 操作反馈通知

### 3. ModelSelector组件
- 从Python服务动态加载模型
- 加载状态指示
- 错误回退机制
- 模型状态标签

### 4. 状态管理 (`src/store/modelStore.ts`)
- 全局存储选中模型
- 组件间数据共享

## 使用流程

1. **启动系统** → 运行启动脚本
2. **选择模型** → 从下拉列表选择
3. **启动训练** → 点击左上角开关
4. **监控状态** → 查看右侧面板

## API端点

```
GET  /api/health   - 健康检查
GET  /api/models   - 获取模型列表
POST /api/inference - 推理/训练请求
```

## 故障排除

### 无法连接Python服务
```bash
# 检查端口
netstat -ano | findstr "8080"

# 测试API
curl http://localhost:8080/api/health
```

### 端口被占用
- 脚本会提示是否终止占用进程
- 输入'y'自动清理并继续

### 模型加载失败
- 自动回退到默认模型列表
- 包含BERT/ResNet/GPT-2等常用模型

## 系统架构

```
┌─────────────┐
│ React前端   │
│  ┌─────────┐│
│  │Switch   ││
│  │Selector ││
│  └───▲─────┘│
│      │HTTP   │
└──────┼───────┘
       │8080
┌──────▼───────┐
│ Flask服务    │
│  ┌─────────┐│
│  │Workflow ││
│  │APIs     ││
│  └─────────┘│
└──────────────┘
```

## 技术特性

- ✓ 直接HTTP通信（减少延迟）
- ✓ Zustand状态管理
- ✓ 完善的错误处理
- ✓ 自动回退机制
- ✓ 响应式UI设计

## 依赖检查

运行前请确保已安装：
- Python 3.8+
- Node.js 16+
- 所有Python依赖（`pip install -r williw-use-master/requirements.txt`）
- Node依赖（`npm install`）
