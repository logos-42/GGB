
1. 电池数据
2. 网络数据
3. GPU数据
4. CPU数据
5. 训练数据
6. 拓扑数据
7. 共识数据
8. 节点状态数据

根据代码分析，系统从节点可以获取的数据如下：

## 节点可获取数据总览

| 数据类别 | 数据项 | 数据类型 | 描述 |
|---------|--------|---------|------|
| **电池数据** | battery_level | `Option<f32>` | 电池电量（0-1，0表示空，1表示满） |
| | is_charging | `Option<bool>` | 是否正在充电 |
| | battery_status | `String` | 电池状态描述字符串（"xx% (充电中)"、"xx% (使用电池)"、"xx%"、"无电池"） |
| **网络数据** | network_type | `NetworkType` | 网络类型（WiFi、Cellular4G、Cellular5G、Unknown） |
| | bandwidth_factor | `f32` | 网络带宽系数（WiFi=1.0, 5G=0.5, 4G=0.3, Unknown=0.2） |
| | relay_delays | `Vec<(String, u64)>` | 到各个中继节点的延迟（中继URL, 延迟毫秒数） |
| | end_to_end_delay | `Option<u64>` | 端到端延迟（毫秒） |
| | local_derp_delays | `Vec<(String, u64)>` | 本地DERP节点延迟信息 |
| | distance_level | `DistanceLevel` | 距离级别（VeryClose<20ms, Close<100ms, Medium<300ms, Far>300ms, Unknown） |
| | distance_description | `String` | 距离描述（"非常近"、"同城"、"同国"、"远距离"、"未知"） |
| | network_affinity | `f32` | 网络亲和度（基于距离级别计算） |
| **GPU数据** | has_gpu | `bool` | 是否有GPU |
| | gpu_compute_apis | `Vec<GpuComputeApi>` | 支持的GPU计算API（CUDA、OpenCL、Metal、Vulkan、DirectX） |
| | has_tpu | `Option<bool>` | 是否有TPU/NPU |
| | gpu_name | `String` | GPU名称 |
| | gpu_usage_percent | `f32` | GPU使用率（0-100%） |
| | gpu_memory_used_mb | `Option<u64>` | GPU显存使用量（MB） |
| | gpu_memory_total_mb | `Option<u64>` | GPU显存总量（MB） |
| | gpu_temperature | `Option<f32>` | GPU温度（摄氏度） |
| | compute_capability | `f32` | GPU计算能力 |
| **CPU数据** | cpu_cores | `u32` | CPU核心数 |
| | cpu_architecture | `String` | CPU架构（如"x86_64"） |
| | max_cpu_cores | `u32` | 最大可使用CPU核心数 |
| **内存数据** | max_memory_mb | `u64` | 最大可用内存（MB） |
| | memory_pressure.current_usage_mb | `usize` | 当前内存使用量（MB） |
| | memory_pressure.threshold_mb | `usize` | 内存压力阈值（MB） |
| **设备数据** | device_type | `DeviceType` | 设备类型（Phone、Tablet、Desktop、Unknown） |
| | enable_gpu_acceleration | `bool` | 是否启用GPU加速 |
| | enable_tpu_acceleration | `bool` | 是否启用TPU/NPU加速 |
| | enable_battery_optimization | `bool` | 是否启用电池优化 |
| | enable_network_awareness | `bool` | 是否启用网络感知 |
| | performance_score | `f64` | 设备性能评分（0-1） |
| **地理位置数据** | position.lat | `f32` | 纬度（-60到60度） |
| | position.lon | `f32` | 经度（-180到180度） |
| | geo_affinity | `f32` | 地理亲和度（0-1） |
| **训练数据** | tick_count | `u64` | 训练轮次 |
| | model_version | `u64` | 模型版本号 |
| | model_hash | `String` | 模型哈希值（Keccak256） |
| | convergence_score | `f32` | 收敛度（0-1） |
| | parameter_change_magnitude | `f32` | 参数变化幅度 |
| | parameter_std_dev | `f32` | 参数标准差 |
| | learning_rate | `f32` | 学习率 |
| | loss_type | `LossType` | 损失函数类型（MSE、CrossEntropy、MAE） |
| **统计数据** | elapsed_secs | `u64` | 训练运行时间（秒） |
| | sparse_updates_received | `u64` | 接收的稀疏更新数量 |
| | sparse_updates_sent | `u64` | 发送的稀疏更新数量 |
| | dense_snapshots_received | `u64` | 接收的密集快照数量 |
| | dense_snapshots_sent | `u64` | 发送的密集快照数量 |
| | heartbeats_sent | `u64` | 发送的心跳数量 |
| | heartbeats_received | `u64` | 接收的心跳数量 |
| | probes_sent | `u64` | 发送的相似度探测数量 |
| | probes_received | `u64` | 接收的相似度探测数量 |
| | total_interactions | `u64` | 总交互次数 |
| **拓扑数据** | similarity | `f32` | 模型相似度（余弦相似度，0-1） |
| | embedding | `Vec<f32>` | 节点嵌入向量 |
| | embedding_dim | `usize` | 嵌入向量维度 |
| | score | `f32` | 节点综合评分（embedding + geo + network权重） |
| | connected_peers | `usize` | 当前连接的节点数量 |
| | max_neighbors | `usize` | 最大邻居节点数 |
| | failover_pool | `usize` | 备用节点池大小 |
| **共识数据** | stake_eth | `f64` | 以太坊质押量 |
| | stake_sol | `f64` | Solana质押量 |
| | reputation | `f64` | 节点声誉 |
| | combined_weight | `f32` | 综合质押权重（质押+声誉的对数） |
| | staking_score | `f32` | 质押评分（0-5） |
| **节点状态数据** | node_id | `String` | 节点唯一标识 |
| | address | `String` | 节点地址 |
| | public_key | `String` | 节点公钥 |
| | registered_at | `i64` | 注册时间戳（秒） |
| | last_active_at | `i64` | 最后活跃时间戳（秒） |
| | status | `NodeStatus` | 节点状态（Active、Offline、Busy、Paused） |
| | available | `bool` | 节点是否可用 |
| | assigned_tasks | `usize` | 已分配任务数 |
| | completed_tasks | `usize` | 已完成任务数 |
| | success_rate | `f64` | 任务成功率（0-1） |
| **Checkpoint数据** | version | `u64` | Checkpoint版本 |
| | model_dim | `usize` | 模型维度 |
| | timestamp | `u64` | Checkpoint时间戳 |
| | checkpoint_convergence_score | `f32` | Checkpoint时的收敛度 |
| **任务数据** | task_id | `String` | 任务ID |
| | task_status | `TaskStatus` | 任务状态（Pending、Running、Completed、Failed） |
| | estimated_completion_time_ms | `u64` | 预计完成时间（毫秒） |
| | proof_required | `bool` | 是否需要证明 |
| **网络传输数据** | max_bandwidth_mbps | `u64` | 最大带宽（Mbps） |
| | allows_dense_snapshot | `bool` | 是否允许密集快照传输 |
| | recommended_tick_interval | `Duration` | 推荐的tick间隔（基于电池和网络状态调整） |

总计约 **90+** 个数据项，涵盖了电池、网络、GPU、CPU、内存、设备、位置、训练、统计、拓扑、共识、状态等多个维度。
